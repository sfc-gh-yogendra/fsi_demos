---
alwaysApply: true
---

# WAM AI Demo - Project Overview

This project designs a Wealth & Private Banking demo showcasing Snowflake AI with unified structured and unstructured data, orchestrated by Snowflake Intelligence agents using Cortex Analyst and Cortex Search.

## Scope (Phase 1 focus)
- Personas: Wealth Manager (primary), Portfolio Manager, Compliance (document scenarios for all, build in priority order).
- Agents: `advisor_ai`, `analyst_ai`, `guardian_ai` (one per persona) with separate Search services per corpus and multiple semantic views when useful.
- Database: `WAM_AI_DEMO`. Warehouses use prefix `WAM_AI_`.
- Region mix: 80% US, 20% EU.
- Advisors/Clients: 5 advisors × ~25 clients (≈125 clients).
- Accounts/Holdings: 2 accounts/client; 12–18 holdings/account.
- Market data: Hybrid; anchor two portfolios with real OHLCV (US MegaTech Focus, US Financials Core), rest synthetic.
- Golden tickers (parameterized): `AAPL, MSFT, NVDA, JPM, V, SAP`.
- PDFs: AI-generated questionnaires/agreements stored in stage `@WAM_AI_DEMO.RAW.CLIENT_DOCS` (2 PDFs per new client).
- Charts: Generated on request by agents via a `data_to_chart` capability.

## Key Principles
- Keep structured/unstructured parity: communications and research reference owned tickers and timelines.
- Tool-explicit flows: each step declares whether it uses Cortex Analyst, Cortex Search, or both.
- Deterministic rebuilds: parameterized volumes, time windows, model/temperature; support replace-all, data-only, semantics+search-only modes.

## Implementation Status (Validated)
- ✅ **Real Data Extraction**: Successfully extracts 2,539 assets + 22,974 market records
- ✅ **Database Setup**: Creates WAM_AI_DEMO with proper schemas and warehouses  
- ✅ **Sample Data**: Generates realistic positions, communications, research, regulatory content
- ✅ **Semantic Views**: CLIENT_FINANCIALS_SV and CLIENT_INTERACTIONS_SV working
- ✅ **Search Services**: All 3 services (COMMUNICATIONS, RESEARCH, REGULATORY) operational
- ✅ **Component Testing**: Systematic validation of all AI components

## Critical Implementation Notes
- **IDENTITY Columns**: Use SQL INSERT, not Snowpark DataFrames
- **quote_identifiers**: Parameter not supported with save_as_table()
- **Real Data**: Graceful fallback from Marketplace to synthetic data
- **Content Escaping**: Always escape single quotes in SQL strings
- **Test Mode**: Use simplified sample data for faster iteration

## References
- Snowpark sessions via `connections.toml` (create Session using connection_name)
- Unstructured generation via `snowflake.cortex.complete`
- Complete table schemas and naming conventions: [naming-and-schemas.mdc](mdc:.cursor/rules/naming-and-schemas.mdc)
- Real data integration with CSV fallback: [real-data-integration.mdc](mdc:.cursor/rules/real-data-integration.mdc)
- Agent setup instructions: [AGENT_SETUP_GUIDE.md](../AGENT_SETUP_GUIDE.md) - GUI setup steps, tool configs, test queries
- Customer demo scenarios: [DEMO_SCENARIOS.md](../DEMO_SCENARIOS.md) - Presentation flows, expected responses, talking points
- Detailed implementation patterns consolidated from proven old_rules

## Documentation Guidelines
When building new features or scenarios:
- **AGENT_SETUP_GUIDE.md**: Technical setup instructions for Snowflake Intelligence GUI
- **DEMO_SCENARIOS.md**: Customer-facing demo storylines and presentation flows
- **Cursor Rules (.mdc files)**: Internal configuration and implementation patterns

## File Organization Rules
- **Semantic Views**: SINGLE file `src/create_semantic_views.py` (includes Phase 2 watchlist views)
- **Structured Data**: SINGLE file `src/generate_structured.py` (includes all structured generation)
- **Unstructured Data**: SINGLE file `src/generate_unstructured.py` (includes all document generation)
- **NO FEATURE-SPECIFIC FILES**: Do not create separate files for ESG, watchlists, or themed features

