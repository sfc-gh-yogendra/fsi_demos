---
alwaysApply: true
---

# SAM Demo - Naming Conventions and Standards

Complete naming standards for database objects, columns, and code following industry best practices.

## Table Naming Standards

### CURATED Schema (Industry-Standard Dimensional Model)
- **Dimension Tables**: Use `DIM_` prefix
  - Examples: `DIM_SECURITY`, `DIM_ISSUER`, `DIM_PORTFOLIO`, `DIM_BENCHMARK`
  - Purpose: Store descriptive attributes and reference data
  - Note: `DIM_SECURITY` includes direct TICKER and FIGI columns (no separate cross-reference table needed)

- **Fact Tables**: Use `FACT_` prefix
  - Examples: `FACT_TRANSACTION`, `FACT_POSITION_DAILY_ABOR`, `FACT_MARKETDATA_TIMESERIES`
  - Purpose: Store measurable events, transactions, and metrics
  - Note: Never use abbreviations like `FA_` - always use full `FACT_` prefix

### RAW Schema (Document and External Data)
- **Raw Document Tables**: Use `{DOCUMENT_TYPE}_RAW` suffix
  - Examples: `BROKER_RESEARCH_RAW`, `EARNINGS_TRANSCRIPTS_RAW`
  - Purpose: Store unprocessed documents from AI generation
  
- **Processed Corpus Tables**: Use `{DOCUMENT_TYPE}_CORPUS` suffix
  - Examples: `BROKER_RESEARCH_CORPUS`, `EARNINGS_TRANSCRIPTS_CORPUS`
  - Purpose: Store processed documents ready for Cortex Search

- **Temporary/Staging Tables**: Use `TEMP_` prefix
  - Examples: `TEMP_REAL_MARKET_DATA`, `TEMP_GENERATION_PROMPTS`
  - Purpose: Intermediate processing, should be dropped after use

## Column Naming Standards

### Primary Keys
- Use singular form with `ID` suffix: `SecurityID`, `IssuerID`, `PortfolioID`
- Never use spaces or special characters
- Use PascalCase for consistency

### Foreign Keys
- Match the primary key name exactly: `IssuerID` (FK) references `IssuerID` (PK)
- Exception: Self-referencing keys add descriptor: `UltimateParentIssuerID`

### Date/Time Columns
- Date columns: Use descriptive names with `Date` suffix
  - Examples: `TradeDate`, `SettleDate`, `ReportingDate`, `HoldingDate`
- Timestamp columns: Use `_NTZ` suffix for clarity
  - Examples: `RecordStartDate_NTZ`, `LastUpdated_NTZ`
- Period indicators: `FiscalQuarter`, `FiscalYear`

### Amount/Value Columns
- Monetary values: Include currency indicator
  - Examples: `MarketValue_USD`, `MarketValue_Local`, `MarketValue_Base`
- Quantities: Use clear descriptive names
  - Examples: `Quantity`, `SharesOutstanding`, `Volume`
- Rates/Percentages: Include unit type
  - Examples: `CouponRate`, `PortfolioWeight`, `ReturnPercent`

### Indicator/Flag Columns
- Boolean flags: Use `Is` prefix or `Flag` suffix
  - Examples: `IsActive`, `IsPrimaryForType`, `CallableFlag`
- Status columns: Use clear descriptive names
  - Examples: `TransactionStatus`, `ApprovalStatus`

### Text/Descriptor Columns
- Use clear, business-friendly names
  - Examples: `Description`, `LegalName`, `SecurityType`
- Avoid abbreviations unless industry-standard
  - Good: `GICS_Sector` (industry standard)
  - Bad: `Desc`, `Nm`, `Typ`

## Schema Organization

```
SAM_DEMO/
├── RAW/                          # External and unprocessed data
│   ├── *_RAW tables             # Raw document storage
│   ├── TEMP_* tables            # Temporary processing
│   └── GENERATION_PROMPTS       # AI generation metadata
├── CURATED/                      # Business-ready dimensional model
│   ├── DIM_* tables             # Dimension tables
│   ├── FACT_* tables            # Fact tables
│   └── *_CORPUS tables          # Processed documents
└── AI/                          # AI/ML components
    ├── Semantic Views           # Cortex Analyst views
    └── Search Services          # Cortex Search services
```

## Reserved Keywords Compliance

Following [Snowflake reserved keywords](https://docs.snowflake.com/en/sql-reference/reserved-keywords):

### ✅ All Object Names Verified Safe
- **Table Names**: DIM_SECURITY, DIM_ISSUER, FACT_POSITION_DAILY_ABOR, FACT_TRANSACTION, etc.
- **Column Names**: SecurityID, IssuerID, PRIMARYTICKER, LEGALNAME, GICS_SECTOR, etc.
- **Warehouse Names**: SAM_DEMO_EXECUTION_WH, SAM_DEMO_CORTEX_WH
- **AI Objects**: SAM_ANALYST_VIEW, SAM_BROKER_RESEARCH, etc.

### Naming Conventions Used
- Underscore separation (PORTFOLIO_HOLDINGS not PORTFOLIO-HOLDINGS)
- Descriptive prefixes (SAM_DEMO_, SAM_)
- No reserved words as primary identifiers
- Consistent casing (UPPER_CASE for database objects)

### Reserved Keywords to Avoid
Critical keywords that cause issues:
- **Table/Column context**: TABLE, COLUMN, VIEW, SCHEMA, DATABASE
- **Query context**: SELECT, FROM, WHERE, ORDER, GROUP, SET
- **Expression context**: CASE, WHEN, TRUE, FALSE, NULL
- **Join context**: JOIN, LEFT, RIGHT, INNER, OUTER, CROSS

## AI Component Naming

### Semantic Views
- Prefix: `SAM_`
- Format: `SAM_{PURPOSE}_VIEW`
- Examples: `SAM_ANALYST_VIEW`, `SAM_RESEARCH_VIEW`

### Cortex Search Services
- Prefix: `SAM_`
- Format: `SAM_{DOCUMENT_TYPE}`
- Examples: `SAM_BROKER_RESEARCH`, `SAM_EARNINGS_TRANSCRIPTS`

### Agent Names
- Format: `{purpose}_{type}`
- Examples: `portfolio_copilot`, `research_copilot`, `esg_guardian`

## Code Naming Standards

### Python Functions
```python
# Table builders
def build_{table_category}(session: Session, test_mode: bool = False):
    """Build {description} tables."""

# Real asset functions  
def build_{entity}_from_real_data(session: Session):
    """Build {entity} using real asset data."""

# Validation functions
def validate_{component}_data_quality(session: Session):
    """Validate data quality for {component}."""
```

### Configuration Constants
```python
# Use structured objects for configuration
DATABASE = {'name': 'SAM_DEMO', 'schemas': {...}}
WAREHOUSES = {'execution': {...}, 'cortex_search': {...}}
SECURITIES = {'counts': {...}, 'real_assets_view': 'V_REAL_ASSETS'}

# Group related settings
DOCUMENT_TYPES = {
    'broker_research': {'count': 500, 'linkage': 'security'},
    'earnings_transcripts': {'count': 300, 'linkage': 'security'}
}
```

## Best Practices

1. **Consistency**: Always follow the established pattern for similar objects
2. **Clarity**: Names should be self-documenting and business-friendly
3. **No Abbreviations**: Avoid abbreviations except industry-standard ones (USD, ABOR, FIGI)
4. **Case Sensitivity**: Use UPPERCASE for SQL objects, PascalCase for columns
5. **Reserved Words**: Never use Snowflake reserved words (documented above)
6. **Length Limits**: Keep names reasonable (< 64 chars for most databases)
7. **Future-Proof**: Choose names that will make sense as the system grows

## Validation Checklist

Before implementing new objects, verify:
- [ ] Name follows established pattern for object type
- [ ] No reserved keywords used
- [ ] Consistent with existing similar objects
- [ ] Self-documenting and business-friendly
- [ ] Appropriate length and case convention
- [ ] Will work across all target environments